<style>
    body {
        background-color: #f0f2f5;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }

    .chat-box {
        background: #fff;
        padding: 24px;
        border-radius: 16px;
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
        width: 700px;
        max-width: 90%;
        display: block;
    }

    #chat-log {
        display: block;
        width: 100%;
        height: 320px;
        padding: 12px;
        margin-bottom: 20px;
        resize: none;
        font-size: 14px;
        line-height: 1.6;
        background-color: #f7f9fc;
        border: 1px solid #dce3ed;
        border-radius: 12px;
        color: #333;
        overflow-y: auto;
    }

    #chat-message-input {
        display: block;
        width: 100%;
        padding: 12px;
        font-size: 14px;
        border-radius: 12px;
        border: 1px solid #ccd6e0;
        margin-bottom: 12px;
        box-sizing: border-box;
    }

    #send-message {
        display: block;
        width: 100%;
        padding: 12px;
        font-size: 16px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.1s ease;
    }

    #send-message:hover {
        background-color: #0056b3;
        transform: scale(1.02);
    }

    #send-message:active {
        transform: scale(0.98);
    }
</style>

<div class="chat-box">
    <textarea id="chat-log" cols="100" rows="20" readonly></textarea>
    <input id="chat-message-input" type="text" size="100" autocomplete="off" placeholder="Type your message here..." />
    <button id="send-message">Send</button>
</div>


<script>
    const roomName = 'user1-user2'; 
    const protocol = window.location.protocol === 'https:' ? 'wss://' : 'ws://';
    const chatSocket = new WebSocket(protocol + window.location.host + '/ws/chatroom/' + roomName + '/');

    chatSocket.onmessage = function(e) {
        const data = JSON.parse(e.data);
        const message = data['message'];
        const sender = data['sender'];

        // Display message in chat log
        const chatLog = document.querySelector('#chat-log');
        chatLog.value += `${sender}: ${message}\n`;
        chatLog.scrollTop = chatLog.scrollHeight;  // Auto-scroll
    };

    chatSocket.onclose = function(e) {
        console.error('Chat socket closed unexpectedly');
    };

    document.querySelector('#send-message').onclick = function() {
        const messageInputDom = document.querySelector('#chat-message-input');
        const message = messageInputDom.value;

        if (message.trim() !== '') {
            chatSocket.send(JSON.stringify({'message': message}));
            messageInputDom.value = '';  // Clear input
        }
    };
</script>